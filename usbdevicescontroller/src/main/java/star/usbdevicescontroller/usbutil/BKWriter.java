package star.usbdevicescontroller.usbutil;import android.hardware.usb.UsbDeviceConnection;import android.hardware.usb.UsbEndpoint;import java.io.IOException;import java.io.Writer;public class BKWriter extends Writer {    private static final int TIMEOUT = 5000;    private final UsbDeviceConnection connection;    private final UsbEndpoint endpoint;    public BKWriter(UsbDeviceConnection connection, UsbEndpoint endpoint) {        this.connection = connection;        this.endpoint = endpoint;    }    @Override    public void write(char[] buf, int offset, int count) throws IOException {//        byte[] buffer = new String(buf, offset, count).getBytes(Charset.forName("US-ASCII"));        byte[] buffer = new byte[count];        for(int i = 0; i < count; i++) {            buffer[i] = (byte) buf[i];        }        int byteCount = connection.bulkTransfer(endpoint, buffer, count, TIMEOUT);    }    @Override    public void close() throws IOException {    }    @Override    public void flush() throws IOException {    }}